package mariojimenez;
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

public class Window extends JFrame{
	private static final long serialVersionUID = 1L;
	private JTabbedPane panelPestanas;
	private JPanel panelEntrada, panelEstadisticas;
	private JMenu menuArchivo, menuAcercaDe;
	private JMenuItem itemSalir;
	private JMenuBar barraMenu;
	private JLabel etiquetaNombre, etiquetaApellidos, etiquetaEdad;
	private JTextField cajaNombre, cajaApellidos, cajaEdad;
	private JButton botonAnadir;
	private JTable tabla;
	public static void main(String[] args) {
		new Window();
	}
	public Window() {
		crearInterfaz();
	}
	public void crearInterfaz() {
		crearMenu();
		crearPanelPestanas();
		//setLocationRelativeTo(null);
		setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		setSize(800,600);
		setVisible(true);
	}
	public void crearPanelPestanas() {
		panelPestanas=new JTabbedPane();
		//panelEntrada=new JPanel();
		panelEntrada=crearPanelEntradaEmpleados();
		panelEstadisticas=new JPanel();
		panelPestanas.addTab("Entrada de Empleados", null, panelEntrada, "Estas en el Panel de Entrada de Empleados");
		panelPestanas.addTab("Estadisticas", null, panelEstadisticas, "Estas en el Panel de Estadisticas");
		SwingUtilities.updateComponentTreeUI(panelPestanas);
		this.add(panelPestanas,BorderLayout.CENTER);
	}
	public void crearMenu() {
		menuArchivo=new JMenu("Archivo");
		menuAcercaDe=new JMenu("Acerca de...");
		itemSalir=new JMenuItem("Salir");
		menuArchivo.add(itemSalir);
		itemSalir.addActionListener(e-> {
				String opcionPulsada=e.getActionCommand();
				System.out.println("Has pulsado "+opcionPulsada);
				int respuesta=JOptionPane.showOptionDialog(this, "Salida de la aplicación", "¿Realmente desea salir?", 
						JOptionPane.YES_NO_OPTION, 3, null, null, null);
				System.out.println("Opcion Seleccionada: "+respuesta);
				if(respuesta==0) {
					System.out.println("Cerrando aplicación...");
					System.exit(0);
				}else {
					System.out.println("Usted sigue dentro de la aplicación...");
				}
			
		});
		barraMenu=new JMenuBar();
		FlowLayout fl=new FlowLayout();
		fl.setAlignment(FlowLayout.LEFT);
		barraMenu.add(menuArchivo);
		barraMenu.add(menuAcercaDe);
		this.setJMenuBar(barraMenu);
	}
	public JPanel crearPanelEntradaEmpleados() {
		JPanel panelEntrada=new JPanel();
		etiquetaNombre=new JLabel("Nombre:");
		cajaNombre=new JTextField(20);
		etiquetaApellidos=new JLabel("Apellidos:");
		cajaApellidos=new JTextField(20);
		etiquetaEdad=new JLabel("Edad:");
		cajaEdad=new JTextField(5);
		botonAnadir=new JButton("Anadir");
		Modelo modelo=new Modelo();
		RowSorter<TableModel>rowSorter=new TableRowSorter<>(modelo);
		tabla=new JTable(modelo);
		tabla.setRowSorter(rowSorter);
		panelEntrada.add(etiquetaNombre);
		panelEntrada.add(cajaNombre);
		panelEntrada.add(etiquetaApellidos);
		panelEntrada.add(cajaApellidos);
		panelEntrada.add(etiquetaEdad);
		panelEntrada.add(cajaEdad);
		panelEntrada.add(botonAnadir);
		return panelEntrada;
	}
	class Modelo extends AbstractTableModel{
		private static final long serialVersionUID = 1L;
		private String[]nombreColumnas= {"ID","Nombre","Apellidos","Edad"};
		private Class[]tipoColumna= {
			Integer.class,String.class,String.class,Integer.class
		};
		private Object[][]rowData= {};
		
		@Override
		public Class<?> getColumnClass(int columnIndex) {
			return tipoColumna[columnIndex];
		}
		@Override
		public boolean isCellEditable(int rowIndex, int columnIndex) {
			return true;
		}
		@Override
		public void setValueAt(Object value, int rowIndex, int columnIndex) {
			rowData[rowIndex][columnIndex]=value;
		}
		@Override
		public int getRowCount() {
			return rowData.length;
		}
		@Override
		public int getColumnCount() {
			return nombreColumnas.length;
		}
		@Override
		public Object getValueAt(int rowIndex, int columnIndex) {
			return rowData[rowIndex][columnIndex];
		}
		@Override
		public String getColumnName(int column) {
			return nombreColumnas[column];
		}
	}
}
